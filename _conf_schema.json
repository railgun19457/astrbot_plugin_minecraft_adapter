{
  "enabled": {
    "type": "bool",
    "description": "启用 Minecraft 适配器",
    "default": true
  },
  "mc_servers": {
    "type": "template_list",
    "description": "MC服务器列表",
    "templates": {
      "server": {
        "name": "MC服务器",
        "hint": "MC服务器配置",
        "items": {
          "enabled": {
            "type": "bool",
            "description": "启用此服务器",
            "default": true
          },
          "server": {
            "description": "服务器连接信息",
            "type": "object",
            "items": {
              "server_id": {
                "type": "string",
                "description": "服务器ID",
                "hint": "用于区分不同服务器的唯一标识，将用于UMO和指令参数",
                "default": "my_server"
              },
              "host": {
                "type": "string",
                "description": "服务器地址",
                "hint": "AstrbotAdaptor插件所在服务器的IP或域名",
                "default": "localhost"
              },
              "port": {
                "type": "int",
                "description": "服务器端口",
                "hint": "AstrbotAdaptor插件配置的端口，默认8765",
                "default": 8765
              },
              "token": {
                "type": "string",
                "description": "认证 Token",
                "hint": "从 AstrbotAdaptor 插件配置中获取的认证令牌",
                "default": ""
              }
            }
          },
          "enable_ai_chat": {
            "type": "bool",
            "description": "启用 AI 对话功能",
            "hint": "是否在此服务器启用AI聊天，将创建虚拟平台适配器",
            "default": true
          },
          "text2image": {
            "type": "bool",
            "description": "将服务器信息渲染为图片输出",
            "hint": "渲染失败会自动回退为文本发送",
            "default": true
          },
          "message": {
            "description": "消息转发配置",
            "type": "object",
            "items": {
              "forward_chat_to_astrbot": {
                "type": "bool",
                "description": "转发聊天消息到指定会话",
                "hint": "将 Minecraft 玩家聊天消息转发到指定的外部会话",
                "default": true
              },
              "forward_chat_format": {
                "type": "string",
                "description": "聊天消息格式",
                "hint": "转发时的聊天消息格式。{player} 替换为玩家名称，{message} 替换为消息内容",
                "default": "<{player}> {message}"
              },
              "forward_join_leave_to_astrbot": {
                "type": "bool",
                "description": "转发玩家进出消息",
                "hint": "将玩家加入/离开服务器的消息转发到指定会话",
                "default": false
              },
              "target_sessions": {
                "type": "list",
                "description": "目标会话",
                "hint": "MC服务器消息互通的目标会话UMO列表。格式如 aiocqhttp:GroupMessage:123456789。用于MC消息转发到外部、外部消息转发到MC以及区分指令所属服务器",
                "default": []
              },
              "auto_forward_prefix": {
                "type": "string",
                "description": "自动转发消息前缀",
                "hint": "外部会话中以此前缀开头的消息将被转发到MC服务器（例如: *）。留空则转发全部消息",
                "default": "*"
              },
              "mark_option": {
                "type": "string",
                "description": "转发提醒方式",
                "hint": "选择转发成功后的提醒方式：text为文本提醒，emoji为贴表情，none为不提醒",
                "options": ["text", "emoji", "none"],
                "default": "emoji"
              }
            }
          },
          "cmd": {
            "description": "远程指令配置",
            "type": "object",
            "items": {
              "enabled": {
                "type": "bool",
                "description": "启用远程执行指令",
                "hint": "是否允许通过 /mc cmd 指令远程执行服务器命令",
                "default": true
              },
              "cmd_white_black_list": {
                "type": "string",
                "description": "指令名单类型",
                "hint": "white: 仅允许名单内指令；black: 禁止名单内指令；none: 不启用黑白名单",
                "options": ["white", "black", "none"],
                "default": "white"
              },
              "cmd_list": {
                "type": "list",
                "description": "指令名单",
                "hint": "指令白名单或黑名单，填写指令名（不带/）如 say, gamemode, tp",
                "default": ["say", "list", "weather", "time"]
              },
              "bind_enable": {
                "type": "bool",
                "description": "启用绑定功能",
                "hint": "允许用户将外部平台账号与MC游戏ID绑定",
                "default": true
              },
              "custom_cmd_list": {
                "type": "list",
                "description": "自定义指令映射",
                "hint": "自定义快捷指令。格式：触发词 <&参数&><<>>实际指令 {参数} {sender}。{sender}为用户绑定的游戏ID",
                "default": [
                  "head <&player&><<>>give {sender} minecraft:player_head[minecraft:profile={player}] 1",
                  "tpa <&player&><<>>tpa {sender} {player}",
                  "tp <&X&> <&y&> <&z&><<>>tp {sender} <&X&> <&y&> <&z&>"
                ]
              }
            }
          }
        }
      }
    }
  }
}
